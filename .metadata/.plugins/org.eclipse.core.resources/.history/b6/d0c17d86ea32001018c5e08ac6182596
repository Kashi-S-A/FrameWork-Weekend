package com.ty.Crud;

import java.util.List;
import java.util.Optional;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.ConfigurableApplicationContext;

import com.ty.Crud.entity.Employee;
import com.ty.Crud.repo.EmployeeRepo;

@SpringBootApplication
public class CrudApplication {

	public static void main(String[] args) {
		ConfigurableApplicationContext run = SpringApplication.run(CrudApplication.class, args);

		EmployeeRepo repo = run.getBean(EmployeeRepo.class);

		Employee emp = new Employee("M abcd", "m@gmail.com", 70000d);

		// saving employee
//		Employee savedEmp = repo.save(emp);
//		System.out.println(savedEmp);

		// update
//		emp.setEid(3);
//		Employee updatedEmp = repo.save(emp);
//		System.out.println(updatedEmp);

		// Fetch Employee By Id
//		Optional<Employee> opt = repo.findById(1);

//		if (opt.isPresent()) {
//			Employee employee = opt.get();
//			System.out.println(employee);
//		} else {
//			throw new RuntimeException("Employee Not Found");
//		}

//		Employee employee = opt.orElseThrow(() -> new RuntimeException("student not found"));
//		System.out.println(employee);

		// fetch all records
//		List<Employee> employees = repo.findAll();
//		System.out.println("==========Employee============");
//		for (Employee employee : employees) {
//			System.out.println(employee);
//			System.out.println("==================");
//		}

		// delete
//		repo.deleteById(7);
//		System.out.println("deleted");

		System.out.println("Fetching by salary");
		List<Employee> employees = repo.getByNameSalary("Arun A", 50000d);
		System.out.println("==========Employee============");
		for (Employee employee : employees) {
			System.out.println(employee);
			System.out.println("==================");
		}
	}

}
